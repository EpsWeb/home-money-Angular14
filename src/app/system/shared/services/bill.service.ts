import {Injectable} from '@angular/core';
import {HttpClient} from '@angular/common/http';
import {Observable, of} from 'rxjs';
import {Bill} from '../models/bill.model';
import {BaseApi} from '../../../shared/core/base-api';

const API_KEY = '3LgGxTxhmIVB4i7IC7RD1gzc0MvfuaMf'

@Injectable({
  providedIn: 'root'
})
export class BillService extends BaseApi {

  constructor(public override _http: HttpClient) {
    super(_http)
  }

  getBill(): Observable<Bill> {
    return this.get<Bill>('bill');
  }

  updateBill(bill: Bill): Observable<Bill> {
    return this.put('bill', bill)
  }

  getCurrency(base = 'RUB'): Observable<any> {
    // return this._http.get(`https://api.apilayer.com/fixer/latest?base=${base}`, {
    //
    //   headers: {
    //     'apikey': API_KEY
    //   }
    // })

    const mockData = {"success":true,"timestamp":1675708803,"base":"RUB","date":"2023-02-06","rates":{"AED":0.051365,"AFN":1.265573,"ALL":1.509828,"AMD":5.546343,"ANG":0.025193,"AOA":7.04424,"ARS":2.644516,"AUD":0.020332,"AWG":0.025171,"AZN":0.023783,"BAM":0.025395,"BBD":0.028225,"BDT":1.491737,"BGN":0.025485,"BHD":0.005272,"BIF":28.918956,"BMD":0.013984,"BND":0.018521,"BOB":0.096596,"BRL":0.072425,"BSD":0.013979,"BTC":6.08819e-7,"BTN":1.155961,"BWP":0.181313,"BYN":0.035285,"BYR":274.086818,"BZD":0.028178,"CAD":0.018799,"CDF":28.597322,"CHF":0.012981,"CLF":0.000408,"CLP":11.253366,"CNY":0.09502,"COP":66.299224,"CRC":7.927005,"CUC":0.013984,"CUP":0.370577,"CVE":1.444499,"CZK":0.311325,"DJF":2.485239,"DKK":0.097072,"DOP":0.789401,"DZD":1.906891,"EGP":0.422371,"ERN":0.20976,"ETB":0.750527,"EUR":0.013043,"FJD":0.03064,"FKP":0.0116,"GBP":0.011635,"GEL":0.036775,"GGP":0.0116,"GHS":0.171975,"GIP":0.0116,"GMD":0.853025,"GNF":123.269155,"GTQ":0.109738,"GYD":2.94967,"HKD":0.109719,"HNL":0.344615,"HRK":0.098478,"HTG":2.100239,"HUF":5.159681,"IDR":212.506082,"ILS":0.048591,"IMP":0.0116,"INR":1.158028,"IQD":20.403038,"IRR":590.475296,"ISK":1.994262,"JEP":0.0116,"JMD":2.152436,"JOD":0.00992,"JPY":1.855638,"KES":1.746576,"KGS":1.206117,"KHR":57.426675,"KMF":6.310976,"KPW":12.585619,"KRW":17.649925,"KWD":0.004277,"KYD":0.011649,"KZT":6.394087,"LAK":235.541817,"LBP":228.638745,"LKR":5.105887,"LRD":2.194791,"LSL":0.238978,"LTL":0.041291,"LVL":0.008459,"LYD":0.066138,"MAD":0.143791,"MDL":0.262183,"MGA":59.907833,"MKD":0.800092,"MMK":29.355813,"MNT":48.925903,"MOP":0.112982,"MRO":4.992293,"MUR":0.634143,"MVR":0.214658,"MWK":14.357921,"MXN":0.268163,"MYR":0.059544,"MZN":0.892603,"NAD":0.238988,"NGN":6.428479,"NIO":0.510807,"NOK":0.144684,"NPR":1.849501,"NZD":0.022221,"OMR":0.005383,"PAB":0.013979,"PEN":0.054503,"PGK":0.049278,"PHP":0.766513,"PKR":3.848053,"PLN":0.061938,"PYG":102.398873,"QAR":0.050917,"RON":0.063885,"RSD":1.530689,"RUB":1,"RWF":15.147019,"SAR":0.052468,"SBD":0.114631,"SCR":0.185925,"SDG":8.173695,"SEK":0.148728,"SGD":0.018569,"SHP":0.019262,"SLE":0.274018,"SLL":271.989209,"SOS":7.949941,"SRD":0.451789,"STD":289.441008,"SVC":0.122313,"SYP":35.128656,"SZL":0.2464,"THB":0.472104,"TJS":0.143985,"TMT":0.049084,"TND":0.042518,"TOP":0.03264,"TRY":0.263344,"TTD":0.09488,"TWD":0.420003,"TZS":32.708629,"UAH":0.513761,"UGX":51.373664,"USD":0.013984,"UYU":0.539391,"UZS":158.562053,"VEF":31645.364038,"VES":0.316772,"VND":328.379781,"VUV":1.601628,"WST":0.036398,"XAF":8.5171,"XAG":0.000629,"XAU":0.000007488779,"XCD":0.037793,"XDR":0.010328,"XOF":8.51714,"XPF":1.533067,"YER":3.501569,"ZAR":0.246852,"ZMK":125.872918,"ZMW":0.267352,"ZWL":4.502849}}
    return of(mockData)
  }
}
